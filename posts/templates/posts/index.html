{% extends "posts/base.html" %}
{% load static %}

{% block content %}
  <script>
      $(document).ready(function(){
        $(".like-button").click(function(){
            var clickedLikeButton = $(this);
            $.post("{% url 'posts:like'%}",
            {
              post_id : clickedLikeButton.val(),
              csrfmiddlewaretoken: '{{ csrf_token }}'
            },
            function(data,status){
              if(data.is_liked){
                if(!clickedLikeButton.hasClass("liked"))
                {
                  clickedLikeButton.addClass("liked");
                  clickedLikeButton.html("favorite")
                }
              }
              else{
                if(clickedLikeButton.hasClass("liked"))
                {
                  clickedLikeButton.removeClass("liked");
                  clickedLikeButton.html("favorite_border")
                }
              }
              $('#'+clickedLikeButton.val()).html( + data.like_count + ' likes');
            });
        });
    });
  </script>

  {% if latest_post_list %}
      <ul>
        {% for post in latest_post_list %}
          {% include 'posts/timeline_post.html' %}
        {% endfor %}
      </ul>
  {% else %}
      <p>No posts are available.</p>
  {% endif %}

{% endblock %}

<!--

    {% load static %}
    <img src="{% static 'my_app/example.jpg' %}" alt="My image">

-->